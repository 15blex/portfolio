import{h as E,L as ee,b as te,a8 as ne,au as re,av as ae,d as se,s as A,aw as D,S as z,a9 as U,a4 as ie,e as oe,aH as ce,C as ue,aF as k,ah as le,a5 as fe,y as ge}from"./B8frN1ks.js";import{a as de,g as X,s as he,b as T}from"./O08OLQn4.js";import"./CHmq4lNK.js";function qe(e,n,t=!1){E&&ee();var r=e,i=null,s=null,o=ie,c=t?ne:0,a=!1;const u=(l,f=!0)=>{a=!0,g(f,l)},g=(l,f)=>{if(o===(o=l))return;let h=!1;if(E){const m=r.data===re;!!o===m&&(r=ae(),se(r),A(!1),h=!0)}o?(i?D(i):f&&(i=z(()=>f(r))),s&&U(s,()=>{s=null})):(s?D(s):f&&(s=z(()=>f(r))),i&&U(i,()=>{i=null})),h&&A(!0)};te(()=>{a=!1,n(u),a||g(null,null)},c),E&&(r=oe)}let x=!1,F=Symbol();function Qe(e,n,t){const r=t[n]??(t[n]={store:null,source:le(void 0),unsubscribe:k});if(r.store!==e&&!(F in t))if(r.unsubscribe(),r.store=e??null,e==null)r.source.v=void 0,r.unsubscribe=k;else{var i=!0;r.unsubscribe=de(e,s=>{i?r.source.v=s:fe(r.source,s)}),i=!1}return e&&F in t?X(e):ge(r.source)}function Ze(){const e={};function n(){ce(()=>{for(var t in e)e[t].unsubscribe();ue(e,F,{enumerable:!1,value:!0})})}return[e,n]}function Ge(e){var n=x;try{return x=!1,[e(),x]}finally{x=n}}let B;const Y="en",q=["en","it","es"];let L=()=>Y;const pe=e=>{typeof e=="function"?L=M(e):L=M(()=>e),B!==void 0&&B(L())};function M(e){return()=>{const n=e();if(!Q(n))throw new Error("languageTag() didn't return a valid language tag. Check your setLanguageTag call");return n}}const _e=e=>{B=e};function Q(e){return q.includes(e)}const me=Object.freeze(Object.defineProperty({__proto__:null,availableLanguageTags:q,isAvailableLanguageTag:Q,get languageTag(){return L},onSetLanguageTag:_e,setLanguageTag:pe,sourceLanguageTag:Y},Symbol.toStringTag,{value:"Module"})),be=()=>{const e=he;return{page:{subscribe:e.page.subscribe},navigating:{subscribe:e.navigating.subscribe},updated:e.updated}},ve={subscribe(e){return be().page.subscribe(e)}};function Te(e,n){if(e==="")return"";const t=new URL(e,n).pathname;return t.endsWith("/")?t.slice(0,-1):t}function S(e,n){const t=Le(e),r=xe(t,n),[i,s]=we(r);return[i,s]}const C=(e,n,t)=>[n,e,t??""].filter(r=>r!=="/").join("")||"/";function xe(e,n){const t=e.replace(n,"");return t.startsWith("/")?t:`/${t}`}function we(e){const t=["/.html__data.json","/__data.json"].find(r=>e.endsWith(r));return t?[e.slice(0,-t.length)||"/",t]:[e,void 0]}function Le(e){try{return decodeURI(e)}catch{return e}}const Se=e=>({url:n})=>{try{const[t,r]=S(n.pathname,T),i=e.getLanguageFromLocalisedPath(t);if(!i)return n.pathname;const s=e.getCanonicalPath(t,i);return C(s,T,r)}catch{return n.pathname}};function ye(e){return`/${e.split("/").filter(Boolean).join("/")}`}function Ie(e){const n=e.map(t=>typeof t=="string"?r=>r===t:r=>t.test(r));return t=>n.some(r=>r(ye(t)))}const w="rtl",R="ltr";function $e(e){try{const n=new Intl.Locale(e);return"textInfo"in n?n.textInfo.direction===w?w:R:n.getTextInfo().direction===w?w:R}catch{return R}}function Ee(e){const n=e.map(t=>[t,$e(t)]);return Object.fromEntries(n)}const Re=0,H=1,y=2,je=4,_=0,v=1,j=2;function Oe(e){const n=Pe(Fe);return e.sort((t,r)=>{var i,s,o,c,a,u;const g=K(t).map(n),l=K(r).map(n);for(let f=0;f<Math.max(g.length,l.length);f+=1){const h=g[f],m=l[f];if(!h)return-1;if(!m)return 1;for(let b=0;b<Math.max(h.length,m.length);b+=1){const d=h[b],p=m[b];if((d==null?void 0:d[_])||(p==null?void 0:p[_])){if(!d)return-1;if(!p)return 1;const I=((i=h[b+1])==null?void 0:i[v])||((o=(s=g[f+1])==null?void 0:s[0])==null?void 0:o[v]),$=((c=m[b+1])==null?void 0:c[v])||((u=(a=l[f+1])==null?void 0:a[0])==null?void 0:u[v]),V=I&&$,N=I&&!$,W=!I&&$;if((d[_]&&p[_])===y){if(V)continue;if(N)return-1;if(W)return 1}if(d[_]===y)return N?-1:1;if(p[_]===y)return W?1:-1;if(d[j]!==p[j])return(-1)**+d[j];if(d[_]!==p[_])return(-1)**+(d[_]>p[_])}else if((d==null?void 0:d[v])!==(p==null?void 0:p[v]))return Be(d[v],p[v])}}return t<r?1:-1})}function Pe(e){const n=new Map;return t=>(n.has(t)||n.set(t,e(t)),n.get(t))}function Fe(e){const n=[];let t=0;for(;t<=e.length;){const r=e.indexOf("[",t),i=r===-1;if(n.push([Re,e.slice(t,i?void 0:r),!1]),i)break;const s=e[r+1]==="["?H:e[r+1]==="."?y:je,o=s===H?"]]":"]",c=e.indexOf(o,r);if(c===-1)throw new Error(`Invalid route definition ${e}`);const a=e.slice(r,t=c+o.length);n.push([s,a,a.includes("=")])}return n}const K=e=>e.replace(/\[\[[^\]]+\]\](?!$)/g,"").split("/").filter(Boolean);function Be(e,n){if(e===n)return 0;let t=0;for(;e[t]===n[t];)t++;return e[t]?n[t]?e[t]<n[t]?-1:1:-1:1}const Ce=/^(\[)?(\.\.\.)?(\w+)(?:=(\w+))?(\])?$/;function Ne(e){const n=[];return{pattern:e==="/"?/^\/$/:new RegExp(`^${J(e).map(r=>{const i=/^\[\.\.\.(\w+)(?:=(\w+))?\]$/.exec(r);if(i)return n.push({name:i[1],matcher:i[2],optional:!1,rest:!0,chained:!0}),"(?:/(.*))?";const s=/^\[\[(\w+)(?:=(\w+))?\]\]$/.exec(r);if(s)return n.push({name:s[1],matcher:s[2],optional:!0,rest:!1,chained:!0}),"(?:/([^/]+))?";if(!r)return;const o=r.split(/\[(.+?)\](?!\])/);return"/"+o.map((a,u)=>{if(u%2){if(a.startsWith("x+"))return O(String.fromCharCode(parseInt(a.slice(2),16)));if(a.startsWith("u+"))return O(String.fromCharCode(...a.slice(2).split("-").map(b=>parseInt(b,16))));const g=Ce.exec(a);if(!g)throw new Error(`Invalid param: ${a}`);const[,l,f,h,m]=g;return n.push({name:h,matcher:m,optional:!!l,rest:!!f,chained:f?u===1&&o[0]==="":!1}),f?"(.*?)":l?"([^/]*)?":"([^/]+?)"}return O(a)}).join("")}).join("")}/?$`),params:n}}function We(e,n,t){const r={},i=e.slice(1),s=i.filter(c=>c!==void 0);let o=0;for(const[c,a]of n.entries()){let u=i[c-o];if(a.chained&&a.rest&&o&&(u=i.slice(c-o,c+1).filter(l=>l).join("/"),o=0),u===void 0){a.rest&&(r[a.name]="");continue}if(a.matcher&&!t[a.matcher])return;if((t[a.matcher]??(()=>!0))(u)){r[a.name]=u;const l=n[c+1],f=i[c+1];l&&!l.rest&&l.optional&&f&&a.chained&&(o=0),!l&&!f&&Object.keys(r).length===s.length&&(o=0);continue}if(a.optional&&a.chained){o++;continue}return}if(!o)return r}function O(e){return e.normalize().replace(/[[\]]/g,"\\$&").replace(/%/g,"%25").replace(/\//g,"%2[Ff]").replace(/\?/g,"%3[Ff]").replace(/#/g,"%23").replace(/[.*+?^${}()|\\]/g,"\\$&")}const Ae=/\[(\[)?(\.\.\.)?(\w+?)(?:=(\w+))?\]\]?/g;function Z(e,n){return"/"+J(e).map(t=>t.replace(Ae,(r,i,s,o)=>{const c=n[o];if(!c){if(i||s&&c!==void 0)return"";throw new Error(`Missing parameter '${o}' in route ${e}`)}if(c[0]=="/"||c.endsWith("/"))throw new Error(`Parameter '${o}' in route ${e} cannot start or end with a slash`);return c})).filter(Boolean).join("/")}function G(e,n,t){const r=Oe(n);for(const i of r){const s=Ne(i),o=s.pattern.exec(De(e));if(!o)continue;const c=We(o,s.params,t);if(c)return{params:c,id:i}}}const De=e=>e.endsWith("/")?e.slice(0,-1):e,J=e=>e.slice(1).split("/");function ze(e,n,t,r,i){function s(a){const g=a.split("/")[1];if(e.includes(g)&&(i==="always"||g!==n))return g;if(i==="never")return n}function o(a,u){const g=a.endsWith("/")&&a!=="/";a=g?a.slice(0,-1):a;let l=ke(a,u,t,r);return g&&(l+="/"),(i==="always"||u!==n)&&(l=`/${u}${l}`),l}function c(a,u){const g=a.endsWith("/")&&a!=="/";(i==="always"||u!==n)&&(a=a.replace(`/${u}`,"")||"/");const l=g;a=l?a.slice(0,-1):a;let f=Ue(a,u,t,r);return l&&(f+="/"),f}return{getLanguageFromLocalisedPath:s,getLocalisedPath:o,getCanonicalPath:c}}function Ue(e,n,t,r){for(const[i,s]of Object.entries(t)){if(!(n in s))continue;const o=s[n];if(!o)continue;const c=G(e,[o],r);if(c)return Z(i,c.params)}return e}function ke(e,n,t,r){const i=G(e,Object.keys(t),r);if(!i)return e;const s=t[i.id];if(!s)return e;const o=s[n];return o?Z(o,i.params):e}function Me(e,n){const t={},r=[],i=e.sourceLanguageTag,s={defaultLanguageTag:i,runtime:e,translations:t,matchers:{},exclude:Ie(r),prefixDefaultLanguage:"never",textDirection:Ee(e.availableLanguageTags),seo:{noAlternateLinks:!1}},o=ze(e.availableLanguageTags,i,s.translations,s.matchers,s.prefixDefaultLanguage);return Object.freeze(t),Object.freeze(s),{config:s,strategy:o,reroute:()=>Se(o),handle:()=>{throw new Error("")},getLanguageFromUrl(c){const a=P(T),[u]=S(c.pathname,a);return s.exclude(u)?s.defaultLanguageTag:o.getLanguageFromLocalisedPath(u)||s.defaultLanguageTag},resolveRoute(c,a=void 0){if(s.exclude(c))return c;const u=P(T),[g,l]=S(c,u);if(a=a??e.languageTag(),!c.startsWith(u))return c;const f=o.getLocalisedPath(g,a);return C(f,u,l)},route(c){const a=P(T),[u,g]=S(c,a),f=o.getLanguageFromLocalisedPath(u)||s.defaultLanguageTag,h=o.getCanonicalPath(u,f);return C(h,a,g)}}}function P(e){return e===""?"":e.startsWith("/")?e:Te(e,new URL(X(ve).url))}const Je=Me(me);export{qe as a,C as b,Ge as c,Qe as d,S as e,Je as i,Te as n,ve as p,Ze as s};
